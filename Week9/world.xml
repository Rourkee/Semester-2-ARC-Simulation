<mujoco>
  <compiler angle="radian" meshdir="./mesh" texturedir="./texture"/>
  <visual>
    <quality shadowsize="2048" offsamples="2" numslices="16" numstacks="16"/>
    <headlight active="1"/>
    <rgba haze="0.15 0.25 0.35 1"/>
  </visual>

  <option timestep="0.0015" integrator="Euler" iterations="40" solver="Newton"
          impratio="5" noslip_iterations="4" tolerance="1e-8" cone="elliptic">
    <flag actuation="enable" gravity="enable" warmstart="enable"/>
  </option>

  <size nstack="30000" njmax="34" nconmax="1024"/>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="512"/>
    <texture name="plane" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 .15 .2"
             width="512" height="512" mark="cross" markrgb=".8 .8 .8"/>
    <material name="plane" reflectance="0.3" texture="plane" texrepeat="1 1" texuniform="true"/>

    <material name="knob_metal" rgba="0.35 0.35 0.38 1" specular="0.4" shininess="0.6"/>
    <material name="grid_line" rgba="1.0 1.0 1.0 1.0"/>
    <material name="block_mat" rgba="0.9 0.4 0.2 1"/>
    <material name="plate_mat" rgba="0.12 0.12 0.12 1"/>
    <material name="bin_mat"   rgba="0.15 0.15 0.15 1"/>
    <material name="disp_mat"  rgba="0.25 0.25 0.25 1"/>
  </asset>

  <include file="panda.xml"/>

  <worldbody>
    <camera name="cam" mode="targetbody" pos="1.100 1.000 1.000" target="panda_hand"/>
    <light directional="true" diffuse=".2 .2 .2" specular="0 0 0" pos="0.100 1.000 5.000" dir="0 -1 -1" castshadow="false"/>
    <light directional="false" diffuse=".8 .8 .8" specular="0.3 0.3 0.3" pos="0.100 -1.000 4.000" dir="0 0 -1"/>
    <light directional="true" diffuse="0 0 0" specular=".7 .7 .7" pos="0.100 3.000 3.000" dir="0 -3 -3"/>

    <geom name="floor" type="plane" pos="0 0 0" group="1" size="0 0 .1" material="plane" condim="6"
          friction="1.0 0.1 0.01"/>

    <body name="spinning_plate" pos="0.500 0.000 0.005">
      <inertial pos="0 0 0" mass="1.0" diaginertia="0.0012 0.0012 0.0012"/>
      <joint name="plate_rotation" type="hinge" axis="0 0 1" limited="false" damping="2.0" armature="0.03"/>

      <geom name="plate_geom" type="cylinder" size="0.276 0.005" material="plate_mat"
            condim="6" friction="1.6 0.5 0.05" solref="0.0025 1" solimp="0.95 0.99 0.001"/>

      <geom name="plate_hub" type="cylinder" size="0.030 0.002" pos="0 0 0.0065"
            material="knob_metal" condim="6" friction="1.6 0.5 0.05"/>

      <geom name="knob_stem" type="cylinder"
            size="0.012 0.025"
            pos="0.235 0 0.0300"
            material="knob_metal" contype="1" conaffinity="1"
            condim="6" friction="2.0 0.8 0.08"/>

      <!-- Table grid lines -->
      <geom name="grid_h_0" type="box"
            size="0.2100 0.0020 0.0020"
            pos="0 -0.1400 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_h_1" type="box"
            size="0.2100 0.0020 0.0020"
            pos="0 -0.0700 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_h_2" type="box"
            size="0.2100 0.0020 0.0020"
            pos="0 0.0000 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_h_3" type="box"
            size="0.2100 0.0020 0.0020"
            pos="0 0.0700 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_h_4" type="box"
            size="0.2100 0.0020 0.0020"
            pos="0 0.1400 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_0" type="box"
            size="0.0020 0.1400 0.0020"
            pos="-0.2100 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_1" type="box"
            size="0.0020 0.1400 0.0020"
            pos="-0.1400 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_2" type="box"
            size="0.0020 0.1400 0.0020"
            pos="-0.0700 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_3" type="box"
            size="0.0020 0.1400 0.0020"
            pos="-0.0000 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_4" type="box"
            size="0.0020 0.1400 0.0020"
            pos="0.0700 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_5" type="box"
            size="0.0020 0.1400 0.0020"
            pos="0.1400 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
      <geom name="grid_v_6" type="box"
            size="0.0020 0.1400 0.0020"
            pos="0.2100 0 0.0080"
            material="grid_line" contype="0" conaffinity="0"/>
    </body>

    <!-- TRASH BIN -->
    <body name="trash_bin" pos="0.500 0.376 0.060">
      <geom name="trash_base" type="box" size="0.070 0.060 0.003"
            pos="0 0 -0.057" material="bin_mat" contype="0" conaffinity="0"/>
      <geom name="trash_w1" type="box" size="0.070 0.003 0.060"
            pos="0 -0.057 0" material="bin_mat" contype="0" conaffinity="0"/>
      <geom name="trash_w2" type="box" size="0.070 0.003 0.060"
            pos="0 0.057 0" material="bin_mat" contype="0" conaffinity="0"/>
      <geom name="trash_w3" type="box" size="0.003 0.060 0.060"
            pos="-0.067 0 0" material="bin_mat" contype="0" conaffinity="0"/>
      <geom name="trash_w4" type="box" size="0.003 0.060 0.060"
            pos="0.067 0 0" material="bin_mat" contype="0" conaffinity="0"/>

      <!-- bin opening site now RED -->
      <site name="trash_drop" type="cylinder" size="0.054 0.002"
            pos="0 0 0.059" rgba="0.9 0.1 0.1 0.35"/>
    </body>

    <!-- BLOCK DISPENSER (box like bin) -->
    <body name="block_dispenser" pos="0.500 -0.376 0.060">
      <geom name="disp_base" type="box" size="0.070 0.060 0.003"
            pos="0 0 -0.057" material="disp_mat" contype="0" conaffinity="0"/>
      <geom name="disp_w1" type="box" size="0.070 0.003 0.060"
            pos="0 -0.057 0" material="disp_mat" contype="0" conaffinity="0"/>
      <geom name="disp_w2" type="box" size="0.070 0.003 0.060"
            pos="0 0.057 0" material="disp_mat" contype="0" conaffinity="0"/>
      <geom name="disp_w3" type="box" size="0.003 0.060 0.060"
            pos="-0.067 0 0" material="disp_mat" contype="0" conaffinity="0"/>
      <geom name="disp_w4" type="box" size="0.003 0.060 0.060"
            pos="0.067 0 0" material="disp_mat" contype="0" conaffinity="0"/>

      <!-- dispenser opening site now GREEN -->
      <site name="dispenser_pick" type="cylinder" size="0.054 0.002"
            pos="0 0 0.059" rgba="0.2 0.85 0.2 0.35"/>
    </body>
    <body name="DISP01_b" pos="0.500 -0.376 0.079">
      <joint type="free" damping="0.15"/>
      <geom name="DISP01" type="box" size="0.015 0.015 0.015"
            rgba="1.000 0.000 0.000 1.000"
            density="2000" condim="6" friction="1.6 0.6 0.06"
            solref="0.0025 1" solimp="0.95 0.99 0.001"/>
    </body>
  </worldbody>
  <equality/>
</mujoco>
